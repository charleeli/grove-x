#!/usr/bin/env python
#
# Autogenerated by Thrift Compiler (0.9.2)
#
# DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
#
#  options string: py
#

import sys
import pprint
from urlparse import urlparse
from thrift.transport import TTransport
from thrift.transport import TSocket
from thrift.transport import TSSLSocket
from thrift.transport import THttpClient
from thrift.protocol import TBinaryProtocol

from couponEC import CouponECService
from couponEC.ttypes import *

if len(sys.argv) <= 1 or sys.argv[1] == '--help':
  print('')
  print('Usage: ' + sys.argv[0] + ' [-h host[:port]] [-u url] [-f[ramed]] [-s[sl]] function [arg1 [arg2...]]')
  print('')
  print('Functions:')
  print('  GetDefaultConfigRsp getDefaultConfig(GetDefaultConfigReq getDefaultConfigReq)')
  print('  DrawnCountTodayRsp getDrawnCountToday(DrawnCountTodayReq drawnCountTodayReq)')
  print('  UserLeftCouponsCountRsp getUserLeftCouponsCount(UserLeftCouponsCountReq userLeftCouponsCountReq)')
  print('  ClientCouponsRsp getClientCoupons(ClientCouponsReq clientCouponsReq)')
  print('  DecodeCodeRsp decodeCode(DecodeCodeReq decodeCodeReq)')
  print('  CheckArgotRsp checkArgot(CheckArgotReq checkArgotReq)')
  print('  DrawRsp drawCoupon(DrawReq drawReq)')
  print('  FreezeRsp freezeCoupon(FreezeReq freezeReq)')
  print('  RollbackRsp rollbackCoupon(RollbackReq rollbackReq)')
  print('  PayRsp payCoupon(PayReq payReq)')
  print('  UserCouponsRsp getUserCoupons(UserCouponsReq userCouponsReq)')
  print('  WareActsRsp getWareActs(WareActsReq wareActsReq)')
  print('  UsableCouponsRsp getUsableCoupons(UsableCouponsReq usableCouponsReq)')
  print('  NotUsableCouponsRsp getNotUsableCoupons(NotUsableCouponsReq notUsableCouponsReq)')
  print('  ApportionRsp getApportion(ApportionReq apportionReq)')
  print('  CacheCouponGroupsRsp getCacheCouponGroups(CacheCouponGroupsReq cacheCouponGroupsReq)')
  print('  RelatedCouponGroupsRsp getRelatedCouponGroups(RelatedCouponGroupsReq relatedCouponGroupsReq)')
  print('  WareLabelRsp getWareLabel(WareLabelReq wareLabelReq)')
  print('  ServerTimeRsp getServerTime(ServerTimeReq serverTimeReq)')
  print('')
  sys.exit(0)

pp = pprint.PrettyPrinter(indent = 2)
host = 'localhost'
port = 9090
uri = ''
framed = False
ssl = False
http = False
argi = 1

if sys.argv[argi] == '-h':
  parts = sys.argv[argi+1].split(':')
  host = parts[0]
  if len(parts) > 1:
    port = int(parts[1])
  argi += 2

if sys.argv[argi] == '-u':
  url = urlparse(sys.argv[argi+1])
  parts = url[1].split(':')
  host = parts[0]
  if len(parts) > 1:
    port = int(parts[1])
  else:
    port = 80
  uri = url[2]
  if url[4]:
    uri += '?%s' % url[4]
  http = True
  argi += 2

if sys.argv[argi] == '-f' or sys.argv[argi] == '-framed':
  framed = True
  argi += 1

if sys.argv[argi] == '-s' or sys.argv[argi] == '-ssl':
  ssl = True
  argi += 1

cmd = sys.argv[argi]
args = sys.argv[argi+1:]

if http:
  transport = THttpClient.THttpClient(host, port, uri)
else:
  socket = TSSLSocket.TSSLSocket(host, port, validate=False) if ssl else TSocket.TSocket(host, port)
  if framed:
    transport = TTransport.TFramedTransport(socket)
  else:
    transport = TTransport.TBufferedTransport(socket)
protocol = TBinaryProtocol.TBinaryProtocol(transport)
client = CouponECService.Client(protocol)
transport.open()

if cmd == 'getDefaultConfig':
  if len(args) != 1:
    print('getDefaultConfig requires 1 args')
    sys.exit(1)
  pp.pprint(client.getDefaultConfig(eval(args[0]),))

elif cmd == 'getDrawnCountToday':
  if len(args) != 1:
    print('getDrawnCountToday requires 1 args')
    sys.exit(1)
  pp.pprint(client.getDrawnCountToday(eval(args[0]),))

elif cmd == 'getUserLeftCouponsCount':
  if len(args) != 1:
    print('getUserLeftCouponsCount requires 1 args')
    sys.exit(1)
  pp.pprint(client.getUserLeftCouponsCount(eval(args[0]),))

elif cmd == 'getClientCoupons':
  if len(args) != 1:
    print('getClientCoupons requires 1 args')
    sys.exit(1)
  pp.pprint(client.getClientCoupons(eval(args[0]),))

elif cmd == 'decodeCode':
  if len(args) != 1:
    print('decodeCode requires 1 args')
    sys.exit(1)
  pp.pprint(client.decodeCode(eval(args[0]),))

elif cmd == 'checkArgot':
  if len(args) != 1:
    print('checkArgot requires 1 args')
    sys.exit(1)
  pp.pprint(client.checkArgot(eval(args[0]),))

elif cmd == 'drawCoupon':
  if len(args) != 1:
    print('drawCoupon requires 1 args')
    sys.exit(1)
  pp.pprint(client.drawCoupon(eval(args[0]),))

elif cmd == 'freezeCoupon':
  if len(args) != 1:
    print('freezeCoupon requires 1 args')
    sys.exit(1)
  pp.pprint(client.freezeCoupon(eval(args[0]),))

elif cmd == 'rollbackCoupon':
  if len(args) != 1:
    print('rollbackCoupon requires 1 args')
    sys.exit(1)
  pp.pprint(client.rollbackCoupon(eval(args[0]),))

elif cmd == 'payCoupon':
  if len(args) != 1:
    print('payCoupon requires 1 args')
    sys.exit(1)
  pp.pprint(client.payCoupon(eval(args[0]),))

elif cmd == 'getUserCoupons':
  if len(args) != 1:
    print('getUserCoupons requires 1 args')
    sys.exit(1)
  pp.pprint(client.getUserCoupons(eval(args[0]),))

elif cmd == 'getWareActs':
  if len(args) != 1:
    print('getWareActs requires 1 args')
    sys.exit(1)
  pp.pprint(client.getWareActs(eval(args[0]),))

elif cmd == 'getUsableCoupons':
  if len(args) != 1:
    print('getUsableCoupons requires 1 args')
    sys.exit(1)
  pp.pprint(client.getUsableCoupons(eval(args[0]),))

elif cmd == 'getNotUsableCoupons':
  if len(args) != 1:
    print('getNotUsableCoupons requires 1 args')
    sys.exit(1)
  pp.pprint(client.getNotUsableCoupons(eval(args[0]),))

elif cmd == 'getApportion':
  if len(args) != 1:
    print('getApportion requires 1 args')
    sys.exit(1)
  pp.pprint(client.getApportion(eval(args[0]),))

elif cmd == 'getCacheCouponGroups':
  if len(args) != 1:
    print('getCacheCouponGroups requires 1 args')
    sys.exit(1)
  pp.pprint(client.getCacheCouponGroups(eval(args[0]),))

elif cmd == 'getRelatedCouponGroups':
  if len(args) != 1:
    print('getRelatedCouponGroups requires 1 args')
    sys.exit(1)
  pp.pprint(client.getRelatedCouponGroups(eval(args[0]),))

elif cmd == 'getWareLabel':
  if len(args) != 1:
    print('getWareLabel requires 1 args')
    sys.exit(1)
  pp.pprint(client.getWareLabel(eval(args[0]),))

elif cmd == 'getServerTime':
  if len(args) != 1:
    print('getServerTime requires 1 args')
    sys.exit(1)
  pp.pprint(client.getServerTime(eval(args[0]),))

else:
  print('Unrecognized method %s' % cmd)
  sys.exit(1)

transport.close()
